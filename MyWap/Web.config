<?xml version="1.0"?>
<configuration>

    <configSections>
      <section name="urlrewritingnet" restartOnExternalChanges="true" requirePermission="false" type="UrlRewritingNet.Configuration.UrlRewriteSection, UrlRewritingNet.UrlRewriter"/>
      <sectionGroup name="fiftyOne">
        <section name="log" type="FiftyOne.Foundation.Mobile.Configuration.LogSection, FiftyOne.Foundation" requirePermission="false" allowDefinition="Everywhere" restartOnExternalChanges="false" allowExeDefinition="MachineToApplication"/>
        <section name="redirect" type="FiftyOne.Foundation.Mobile.Configuration.RedirectSection, FiftyOne.Foundation" requirePermission="false" allowDefinition="Everywhere" restartOnExternalChanges="false" allowExeDefinition="MachineToApplication"/>
        <section name="wurfl" type="FiftyOne.Foundation.Mobile.Detection.Wurfl.Configuration.WurflSection, FiftyOne.Foundation" requirePermission="false" allowDefinition="Everywhere" restartOnExternalChanges="false" allowExeDefinition="MachineToApplication"/>
      </sectionGroup>
      <sectionGroup name="mobile">
        <section name="toolkit" type="Mobile.Configuration.ToolkitSection, Mobile, Version=0.1.5.0, Culture=neutral" allowDefinition="Everywhere" restartOnExternalChanges="false" allowExeDefinition="MachineToApplication"/>
        <section name="wurfl" type="Mobile.Devices.Wurfl.Configuration.WurflSection, Mobile, Version=0.1.5.0, Culture=neutral" allowDefinition="Everywhere" restartOnExternalChanges="false" allowExeDefinition="MachineToApplication"/>
      </sectionGroup>
      
      <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
        <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
          <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
          <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
            <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere" />
            <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
            <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
            <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
          </sectionGroup>
        </sectionGroup>
      </sectionGroup>
    </configSections>
  <mobile>
    <!-- When a mobile device is found to be accessing a non mobile page the mobileRedirectUrl setting is used to redirect the browser to a landing page for mobile devices.-->
    <toolkit mobileRedirectUrl="~/Default.aspx" logFile="~/App_Data/Log.txt" logLevel="Info"/>
    <!-- The following settings provided the location of wurfl files. wurflFilePath is the path of the main wurfl file (mandatory). newDevicesPatchFile shows where devices that aren't matched exactly should be stored (optional). wurflPatches defines where any additional patch files can be located (optional).-->
    <wurfl wurflFilePath="~/App_Data/wurfl.xml.gz">
      <wurflPatches>
        <add name="browser_definitions" filePath="~/App_Data/web_browsers_patch.xml.gz" enabled="true"/>
      </wurflPatches>
    </wurfl>
  </mobile>
  <fiftyOne>
    <redirect firstRequestOnly="true" mobileHomePageUrl="~/Default.aspx" timeout="20" devicesFile="~/App_Data/Devices.dat" mobilePagesRegex="~/"/>
    <log logFile="~/App_Data/Log.txt" logLevel="Info"/>
    <wurfl wurflFilePath="~/App_Data/wurfl.xml.gz" newDeviceDetail="maximum" newDevicesURL="http://devices.51degrees.mobi/new.ashx" useActualDeviceRoot="false">
      <wurflPatches>
        <add name="browser_definitions" filePath="~/App_Data/web_browsers_patch.xml" enabled="true"/>
      </wurflPatches>
    </wurfl>
  </fiftyOne>
  <appSettings >
    <add key="Domain" value="http://localhost:8080/wapmtraffic"/>
    <add key="ResourceLink" value="http://mtraffic.vn"/>

    <add key="LicenseKey" value="oS/OuBhRatlgQFIjps25BxMp0AI0K8HNIksCXhqoAsKOpb+6I1dPqRamyg/MfbkJ3zCHGNqiHSGbaKvhF/e7Vw==" />
    <add key="Charging_Servicename_VNP" value="MTRAFFIC" />
    <add key="Charging_URLGetMSISDN_VNP" value="http://10.1.10.47/mim1step/getmsisdn" />
  </appSettings>
  <connectionStrings >
    <remove name="strConnection"/>
    <add name="strConnection" providerName="System.Data.SqlClient" connectionString="/d9t1bxPbWXyvgdypXTUzq782IgMILwvSQnNMDPHEUPfXOxArOcDdbPSipDHMeZhHJqkJFZM9rnt71x837GPXW/VvPnLNyZjWQPnEe7qMLsJ5nHFy5dvlHTHJqWYR3ivdVzaDwJP0YBp9WAgTsUNdI4kIkD0eFMAtYVImhUblYAi31aYS40hNQwafdQhzmP0b15ehZlkO2+DEDYpfYFcPBPO3tPlgmucRThINX69Iiw="/>

    <add name="MySQLConnection_Gateway" providerName="MySql.Data.MySqlClient" connectionString="ZSAZhMA6Ng1D9KgZ3l7HIFnfdOttcjLscy1XE/zRSCfBVui2aeaDbg+oXela3iFAtQm1OyjljpCrbT9d74utfg=="/>
    <!--Host-->
    <!--<add name="strConnection" providerName="System.Data.SqlClient" connectionString="/d9t1bxPbWXyvgdypXTUzoIVkOBaiUYgmVXxcD23LlzcVgln0fOcEM3QuAl7wTWkSpej2SUrK70j1IlhCyIVDKpwXfAqBFDICSPnKADI7JtDUt0oL7ZT7UXXIH5UzphRfMhi+SIrlWJ08+erYV39Kpri9GzW2RrADo6Bdb8B6pNGmFJL91JrdJzKrl+USdBvlEnEb/TTm8vmZCWby3GfTh3eLOf5i1Ph2UQ7xFNoHwk="/>-->
    
  </connectionStrings>
    <system.web>
      <httpCookies httpOnlyCookies="true" requireSSL="false"  />
      <customErrors mode="RemoteOnly" defaultRedirect="~/Error.ashx"></customErrors>
      
        <compilation debug="true">

          <assemblies>
            <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
          </assemblies>

        </compilation>
        <!--
            The <authentication> section enables configuration 
            of the security authentication mode used by 
            ASP.NET to identify an incoming user. 
        -->
        <authentication mode="Windows" />
        <!--
            The <customErrors> section enables configuration 
            of what to do if/when an unhandled error occurs 
            during the execution of a request. Specifically, 
            it enables developers to configure html error pages 
            to be displayed in place of a error stack trace.

        <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
            <error statusCode="403" redirect="NoAccess.htm" />
            <error statusCode="404" redirect="FileNotFound.htm" />
        </customErrors>
        -->
      <trust level="Full"/>
      <pages>
        <controls>
          <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
          <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        </controls>
      </pages>

      <httpHandlers>
        <remove verb="*" path="*.asmx"/>
        <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" validate="false"/>
      </httpHandlers>
      <httpModules>
        <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </httpModules>

    </system.web>

    <system.codedom>
      <compilers>
        <compiler language="c#;cs;csharp" extension=".cs" warningLevel="4"
                  type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
          <providerOption name="CompilerVersion" value="v3.5"/>
          <providerOption name="WarnAsError" value="false"/>
        </compiler>
     </compilers>
    </system.codedom>
    
    <!-- 
        The system.webServer section is required for running ASP.NET AJAX under Internet
        Information Services 7.0.  It is not necessary for previous version of IIS.
    -->
    <system.webServer>
      <validation validateIntegratedModeConfiguration="false"/>
      <modules>
        <remove name="ScriptModule"/>
        <add name="UrlRewriteModule" type="UrlRewritingNet.Web.UrlRewriteModule, UrlRewritingNet.UrlRewriter"/>
        <remove name="Detector"/>
        <add name="Detector" type="FiftyOne.Foundation.Mobile.Detection.DetectorModule,FiftyOne.Foundation"/>
        <remove name="ScriptModule" />
        <add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </modules>
      <handlers>
        <remove name="WebServiceHandlerFactory-Integrated"/>
        <remove name="ScriptHandlerFactory" />
        <remove name="ScriptHandlerFactoryAppServices" />
        <remove name="ScriptResource" />
        <add name="MyASHXBase" path="*.html" verb="GET,HEAD,POST,DEBUG" type="MyBase.MyWap.MyWapBase" resourceType="Unspecified" preCondition="integratedMode"/>
        <add name="AjaxHander" path="*.ajax" verb="GET,HEAD,POST,DEBUG" type="MyAjax.Ajax.MyAjaxHander"/>

        <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode"
             type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode"
             type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </handlers>
      <defaultDocument>
        <files>
          <clear/>
          <add value="default.aspx"/>
        </files>
      </defaultDocument>
    </system.webServer>
  <urlrewritingnet rewriteOnlyVirtualUrls="true" contextItemsPrefix="QueryString" defaultPage="Default.aspx" defaultProvider="RegEx" xmlns="http://www.urlrewriting.net/schemas/config/2006/07">
    <rewrites>
      <add name="rule_11" virtualUrl="^~/page/home.html" rewriteUrlParameter="ExcludeFromClientQueryString" destinationUrl="~/page/home.ashx" ignoreCase="true"/>
      <add name="rule_12" virtualUrl="^~/page/(.*)/detail.html" rewriteUrlParameter="ExcludeFromClientQueryString" destinationUrl="~/page/detail.ashx?id=$1" ignoreCase="true"/>
      <add name="rule_13" virtualUrl="^~/page/guide.html" rewriteUrlParameter="ExcludeFromClientQueryString" destinationUrl="~/page/guide.ashx" ignoreCase="true"/>
      <add name="rule_14" virtualUrl="^~/page/service.html" rewriteUrlParameter="ExcludeFromClientQueryString" destinationUrl="~/page/service.ashx" ignoreCase="true"/>
      <add name="rule_15" virtualUrl="^~/page/reg.html" rewriteUrlParameter="ExcludeFromClientQueryString" destinationUrl="~/page/reg.ashx" ignoreCase="true"/>
      <add name="rule_16" virtualUrl="^~/page/dereg.html" rewriteUrlParameter="ExcludeFromClientQueryString" destinationUrl="~/page/dereg.ashx" ignoreCase="true"/>
      <add name="rule_17" virtualUrl="^~/page/notify.html" rewriteUrlParameter="ExcludeFromClientQueryString" destinationUrl="~/page/notify.ashx" ignoreCase="true"/>
      <add name="rule_18" virtualUrl="^~/page/(.*)/(.*)/confirm.html" rewriteUrlParameter="ExcludeFromClientQueryString" destinationUrl="~/page/confirm.ashx?sid=$1&amp;aid=$2" ignoreCase="true"/>
      
      <add name="rule_22" virtualUrl="^~/page/test.html" rewriteUrlParameter="ExcludeFromClientQueryString" destinationUrl="~/page/home.ashx?cid=$1&amp;id=$2" ignoreCase="true"/>
    </rewrites>
  </urlrewritingnet>
  
    <runtime>
      <assemblyBinding appliesTo="v2.0.50727" xmlns="urn:schemas-microsoft-com:asm.v1">
        <dependentAssembly>
          <assemblyIdentity name="System.Web.Extensions" publicKeyToken="31bf3856ad364e35"/>
          <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
        </dependentAssembly>
        <dependentAssembly>
          <assemblyIdentity name="System.Web.Extensions.Design" publicKeyToken="31bf3856ad364e35"/>
          <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
        </dependentAssembly>
      </assemblyBinding>
    </runtime>

    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="MTrafficSoap" />
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost:8080/MTraffic_WS/MTraffic.asmx"
                binding="basicHttpBinding" bindingConfiguration="MTrafficSoap"
                contract="WS_MTraffic.MTrafficSoap" name="MTrafficSoap" />
        </client>
    </system.serviceModel>
</configuration>
